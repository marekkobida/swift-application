/*
 * Copyright 2020 Marek Kobida
 */

const os = require('os');

const ApplicationStorage = require('./public/private/ApplicationStorage')
  .default;
const Compiler = require('./public/private/webpack/Compiler').default;

const applicationStorage = new ApplicationStorage();
const compiler = new Compiler();

(async () => {
  // 1. Compile application
  const {
    children: [{ outputPath }],
  } = await compiler.compileApplications(
    ['./private/TestApplication'],
    os.tmpdir()
  );

  // 2. Add application to application storage
  await applicationStorage.addApplication(outputPath);

  // 3. Open application from application storage
  applicationStorage.openApplication(outputPath);

  // 4. Read applications from application storage
  console.log(applicationStorage.readApplications());
})();
